/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function e(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function t(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function n(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function s(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,s)}d((i=i.apply(e,t||[])).next())}))}function i(e,t){var n,i,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,i=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){a.label=r[1];break}if(6===r[0]&&a.label<o[1]){a.label=o[1],o=r;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(r);break}o[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(e){r=[6,e],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}var o="ΔTrackable",r="ΔChangeVersion",a="ΔFactory",s="ΔDefFactories",d="ΔIsFactory",c="ΔΔProxy",l="ΔIsProxy",f="ΔDefault",u="ΔCreateProxy",p="ΔnewItem",v="Δdispose",h="Δjson",m=!1;function g(e){return e&&e.ΔTrackable?e.ΔMd?e.ΔMd:e.ΔMd={parents:void 0,refreshCtxt:void 0,watchers:void 0}:null}var w=Array.isArray;function y(e,t){e&&(w(e)&&!e[l]?e.forEach(t):t(e))}function b(e,t){if(e&&t){if(e===t)return;if(w(e)){var n=e;if(1===n.length){if(n[0]===t)return}else{var i=n.indexOf(t);if(i>-1)return n.splice(i,1),1===n.length?n[0]:n}}}return e}function x(e,t){return e?w(e)&&!e[l]?(e.push(t),e):[e,t]:t}function N(e){return e&&!0===e[o]?e[r]:0}function C(e,t){if(void 0===t&&(t=!1),I(e)){e[v]?e[v](t):k(e,(function(n,i){U(e,i),e["ΔΔ"+n]=void 0,t&&C(i,!0)}));var n=e.ΔMd;if(n){var i=[];y(n.parents,(function(e){i.push(e)}));for(var o=function(t){k(t,(function(n,i){i===e&&(U(t,e),t["ΔΔ"+n]=void 0)})),W(t)},r=0,a=i;r<a.length;r++){o(a[r])}}}}function k(e,t){if(I(e)){var n=e.constructor.prototype["ΔDefFactories"];for(var i in n)n.hasOwnProperty(i)&&t(i,e["ΔΔ"+i],n[i])}}function D(e,t){return!(!e||"object"!=typeof e)&&"ΔΔ"+t in e}function I(e){return!(!e||!0!==e[o])}function P(e){return N(e)%2==1}function $(e,t){var n=g(e);return n&&t?(n.watchers=x(n.watchers,t),P(e)&&ee.register(e),t):null}function j(e,t){var n=e?e.ΔMd:void 0;n&&t&&(n.watchers=b(n.watchers,t))}function A(e,t){if(e&&void 0!==t){if(e[p])return e[p](t);m=!0;var n=e[t];return m=!1,n}}function O(e,t){if(e&&t){var n=e[f];if(n){var i=n(t);if(i!==L)return e[t]=i}var o=e[s],r=o?o[t]:null;if(r)return e[t]=r()}}var V=function(){var e,t,n=[],i=[],o={getDefaultConversion:function(){return r(e,o)},getPreviousConversion:function(){return e.ΔtoJsResult}};function r(e,n){var i=n.getPreviousConversion();if(i)return i;var o=void 0;if(e.Δconvert)o=e.Δconvert(t);else{if(e["Δjson"])return e["Δjson"];o={},k(e,(function(e,n){I(n)&&(n=a(n,t)),void 0!==n&&(o[e]=n)}))}return o}function a(a,s){var d=0===n.length,c=a;if(a&&I(a)&&(n.push(a),c=void 0,i.push(a),e=a,s?(t=s,c=s(a,o)):c=r(a,o),a.ΔtoJsResult=c,i.pop(),e=i[i.length-1]),d){for(var l=n.length;l--;)n[l]["ΔtoJsResult"]=void 0;e=null,n=[],t=void 0}return c}return a}();function F(e){var t=e.prototype;t[o]=!0,t[r]=0}function R(e,t){return e||(e=B,t=3),function(n,i){var o="ΔΔ"+i,r=n[s];r||(r=n[s]={}),r[i]=t?1===t?B:X:e,n[o]=void 0,function(e,t,n,i){i&&delete e[t]&&Object.defineProperty(e,t,i)}(n,i,0,{get:function(){return function(e,t,n,i,o){e.ΔComputeDependencies&&(e.ΔComputeDependencies[n]=!0);!m&&e[h]&&function(e,t){var n,i;t&&k(e,(function(o,r,a){var s=a===J;if(n=t[o],i="ΔΔ"+o,void 0===n)s&&(e[i]=void 0);else{var d=typeof n;if(null===n)(s||a===K)&&(e[i]=null);else if("object"===d){var c=A(e,o);c?c[h]=n:s&&(e[i]=n)}else"string"===d?(s||a===E)&&(e[i]=n):"number"===d?(s||a===M)&&(e[i]=n):"boolean"===d?(s||a===H)&&(e[i]=n):s&&(e[i]=n)}})),e[h]=void 0}(e,e[h]);var r=e[t];(void 0===r||m&&null===r)&&(r=e[t]=!m&&o?o>1?void 0:null:i(),G(e,r));return r}(this,o,i,e,t)},set:function(t){q(this,i,o,t,e,this)},enumerable:!0,configurable:!0})}}var L={};function S(){return""}S[d]=!0;var E=S;function T(){return 0}T[d]=!0;var M=T;function z(){return!1}z[d]=!0;var H=z;function B(){return null}B[d]=!0;var K=B;function X(){}X[d]=!0;var J=X;function q(e,t,n,i,o,r){var a=I(i),s=o===J;if(!e.ΔComputeDependencies){i&&!a&&o.ΔCreateProxy&&(a=I(i=o.ΔCreateProxy(i)||i));var d=!1,c=r[n];return P(e)?d=c!==i:c!==i&&(W(e),d=!0),d&&(a&&void 0===i&&(i=null),(a||c&&I(c))&&function(e,t,n,i){U(e,t),i||G(e,n)}(e,c,i,s),r[n]=i,_(e,"set",t,c,i)),i}console.error("[Trax] @computed properties must not mutate the Data object when calculated")}function _(e,t,n,i,o){var r=e?e.ΔMd:void 0;if(r&&r.trackers){var a=e[c]||e;y(r.trackers,(function(e){e(a,t,n,i,o)}))}}function W(e){if(I(e)){var t=!0;if(P(e)?t=!1:e.ΔChangeVersion+=1,ee.register(e),t){var n=e.ΔMd;n&&n.parents&&y(n.parents,(function(e){W(e)}))}}}function U(e,t){if(t){var n=t.ΔMd;n&&n.parents&&(n.parents=b(n.parents,e))}}function G(e,t){if(t){var n=g(t);n&&(n.parents=x(n.parents,e))}}var Z=0,Q=function(){function e(){this.id=++Z}return e.prototype.register=function(e){var t=this,n=g(e);n&&!n.refreshCtxt&&(this.objects?this.objects.push(e):(this.objects=[e],Promise.resolve().then((function(){t.refresh()}))),n.refreshCtxt=this)},e.prototype.refresh=function(e){void 0===e&&(e=!0);var t=this.objects,n=t?t.length:0;if(n){te();for(var i,o,r=[],a=0;n>a;a++)(o=(i=t[a]).ΔMd).refreshCtxt&&(i.ΔChangeVersion%2&&(i.ΔChangeVersion+=1),o.refreshCtxt&&o.watchers&&r.push({dataNode:i,watchers:o.watchers})),o.refreshCtxt=void 0;this.objects=void 0,r.length&&(e?Y(r):Promise.resolve().then((function(){Y(r)})))}},e}();function Y(e){for(var t=function(e){y(e.watchers,(function(t){t(e.dataNode)}))},n=0,i=e;n<i.length;n++){t(i[n])}}var ee=new Q;function te(){ee.objects&&(ee=new Q)}var ne=["push","pop","shift","unshift","splice"],ie=/^\d+$/,oe=/^\Δ/,re=function(){function e(e){this.ΔTrackable=!0,this.ΔDataFactory=!0,this.ΔChangeVersion=0,this.ΔMd=void 0,this.ΔΔSelf=this,this.ΔIsProxy=!1,this.ΔItemFactory=e}return e.ΔNewProxy=function(t){var n=new Proxy([],new e(t));return n[c]=n,n},e.ΔCreateProxy=function(t,n){if(w(t)){var i=new Proxy(t,new e(n)),o=t.length;for(W(i);o--;)G(i,t[o]);return i}return null},e.prototype.ΔnewItem=function(e){var t=this.ΔItemFactory();return void 0===e&&(e=this.ΔΔList.length),e>-1&&q(this.ΔΔSelf,e,e,t,this.ΔItemFactory,this.ΔΔList),t},e.prototype.Δdispose=function(e){void 0===e&&(e=!1);for(var t,n=this.ΔΔList,i=n.length;i--;)t=n[i],U(this.ΔΔSelf,t),n[i]=void 0,e&&C(t,!0);return n},e.prototype.Δconvert=function(e){for(var t=[],n=this.ΔΔList,i=n.length;i--;)t[i]=V(n[i],e);return t},e.prototype.ΔToString=function(){return"Trax List ["+this.ΔΔList.join(", ")+"]"},e.prototype.ΔinitFromJson=function(){var e=this["Δjson"];if(e){if(e.constructor!==Array)console.error("[Trax] Invalid json type: Lists can only be initialized from Arrays");else for(var t=e.length,n=void 0,i=this.ΔΔList,o=void 0;t--;)if(o=n=e[t],n){var r=this.ΔItemFactory();I(r)&&(r["Δjson"]=n,o=r),i[t]=o}else null===n&&(i[t]=null);this["Δjson"]=void 0}},e.prototype.set=function(e,t,n){if(this.ΔΔList||(this.ΔΔList=e),t.match(ie)){var i=parseInt(t,10);q(this.ΔΔSelf,i,i,n,this.ΔItemFactory,this.ΔΔList)}else t.match(oe)&&(this[t]=n);return!0},e.prototype.get=function(e,t){if(this.ΔΔList||(this.ΔΔList=e),t===l)return!0;var n=typeof t;if(this["Δjson"]&&this.ΔinitFromJson(),"string"===n){if(t.match(oe))return this[t];if(t.match(ie))return this.ΔΔList[parseInt(t,10)];if("length"===t)return this.ΔΔList.length;if("push"===t)return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=this,o=t.length,r=i.ΔΔList.length,a=0;o>a;a++)i.set(e,r+a+"",t[a])};if("toString"===t)return this.ΔToString;if("function"==typeof e[t])return function(){var e=this,n=ne.indexOf(t)>-1;if(n){W(e);for(var i=e.ΔΔList,o=0;i.length>o;o++)U(e,i[o])}var r=e.ΔΔList,a=r[t].apply(r,arguments);if(n){for(i=e.ΔΔList,o=0;i.length>o;o++)G(e,i[o]);_(this,t)}return a}}return t===Symbol.iterator?this.ΔΔList[Symbol.iterator]:this[t]},e}();var ae=function(e){function t(){return re.ΔNewProxy(e)}return e=e||K,t[d]=!0,t[u]=function(t){return re.ΔCreateProxy(t,e)},t},se=function(){function e(e){this.ΔTrackable=!0,this.ΔDataFactory=!0,this.ΔChangeVersion=0,this.ΔMd=void 0,this.ΔΔSelf=this,this.ΔIsProxy=!1,this.ΔItemFactory=e}return e.ΔNewProxy=function(t){var n=new Proxy({},new e(t));return n[c]=n,n},e.ΔCreateProxy=function(t,n){if("object"==typeof t){var i=new Proxy(t,new e(n));for(var o in W(i),t)t.hasOwnProperty(o)&&G(i,t[o]);return i}return null},e.prototype.ΔnewItem=function(e){var t=this.ΔItemFactory();return q(this.ΔΔSelf,e,e,t,this.ΔItemFactory,this.ΔΔDict)},e.prototype.Δdispose=function(e){void 0===e&&(e=!1);var t,n=this.ΔΔDict;for(var i in n)n.hasOwnProperty(i)&&(t=n[i],U(this.ΔΔSelf,t),n[i]=void 0,e&&C(t,!0));return n},e.prototype.Δconvert=function(e){var t={},n=this.ΔΔDict;for(var i in n)n.hasOwnProperty(i)&&(t[i]=V(n[i],e));return t},e.prototype.ΔinitFromJson=function(){var e=this["Δjson"];if(e){if(e.constructor!==Object)console.error("[Trax] Invalid json type: Dictionaries can only be initialized from Objects");else{var t=this.ΔΔDict,n=void 0,i=void 0;for(var o in e)if(e.hasOwnProperty(o))if(i=n=e[o],n){var r=this.ΔItemFactory();I(r)&&(r["Δjson"]=n,i=r),t[o]=i}else null===n&&(t[o]=null)}this["Δjson"]=void 0}},e.prototype.ΔToString=function(){return"Trax Dict {...}"},e.prototype.set=function(e,t,n){return this.ΔΔDict||(this.ΔΔDict=e),t.match(oe)?this[t]=n:q(this.ΔΔSelf,t,t,n,this.ΔItemFactory,this.ΔΔDict),!0},e.prototype.get=function(e,t){return this.ΔΔDict||(this.ΔΔDict=e),t===l||(this["Δjson"]&&this.ΔinitFromJson(),t===Symbol.iterator?this.ΔΔDict[Symbol.iterator]:"string"===typeof t?t.match(oe)?this[t]:this.ΔΔDict[t]:this[t])},e.prototype.deleteProperty=function(e,t){return this.ΔΔDict||(this.ΔΔDict=e),!t.match(oe)&&(q(this.ΔΔSelf,t,t,null,this.ΔItemFactory,this.ΔΔDict),delete this.ΔΔDict[t],!0)},e}();function de(e){function t(){return se.ΔNewProxy(e)}return e=e||K,t[d]=!0,t[u]=function(t){return se.ΔCreateProxy(t,e)},t}var ce=0,le={log:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.log.apply(console,arguments)},error:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];console.error.apply(console,arguments)}};function fe(e,t){for(var n=e,i=[];n;){if(n.template){var o=n.template;i.push('\n>> Template: "'+o.templateName+'" - File: "'+o.filePath+'"')}n=n.parentView}le.error("IVY: "+t+i.join(""))}var ue=void 0,pe=11,ve="$api",he=/^ΔΔ(\w+)Emitter$/,me=/^ΔΔ/,ge=/^ΔΔ(.+)$/,we=/([^ ]+)\s([^ ]+)/,ye="ΔIsAPI",be="ΔIsController",xe="ΔDefaultParam",Ne="ΔRequiredProps",Ce={$targetApi:"$1 cannot be used on DOM nodes",$targetElt:"$1 cannot be used on components that don't define #main elements"},ke=0,De=function(){function e(e,t,n,i,o,r){this.templateName=e,this.filePath=t,this.staticCache=n,this.renderFn=i,this.$Class=o,this.$contextIdentifiers=r,this.kind="$template",this._uid=++ke,this.tplApi=void 0,this.tplCtl=void 0,this.forceRefresh=!1,this.activeWatch=!1,this.lastRefreshVersion=0,this.processing=!1,this.rendering=!1,this.initialized=!1,this.labels=void 0,this.hasCtlClass=!1,this.$contextInitialized=!1,this.view=Ae(null,null,1,this);var a=this;this.watchCb=function(){a.notifyChange()},this.watchCb.$templateId=this._uid,this.$Class!==ue&&(It(this.$Class,be)?this.hasCtlClass=!0:It(this.$Class,ye)||I(this.$Class.prototype)||fe(this.view,"Type of $ argument must be either a @Controller, an @API or a @Data class"))}return e.prototype.dispose=function(e){void 0===e&&(e=!0);var t=this.view;this.disconnectObserver(),Pe(t,this.tplCtl,"$dispose",this.templateName),e&&t&&t.nodes&&t.nodes.length&&(mt(t,t.nodes[0]),t.anchorNode&&(t.rootDomNode.removeChild(t.anchorNode),t.anchorNode=null))},Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"document",{get:function(){return this.view.doc},set:function(e){this.view.doc=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"api",{get:function(){if(!this.tplApi)if(this.hasCtlClass){var e=this.controller;e&&e.$api&&(this.tplApi=e.$api)}else this.$Class?(this.tplApi=new this.$Class,Ie(this.view,this.tplApi,this.staticCache)):this.$contextIdentifiers?this.tplApi=function(e){return void 0!==e?(t[d]=!0,de(t)()):de()();function t(){return new e}}():this.tplApi={};return this.tplApi},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controller",{get:function(){if(!this.tplCtl&&this.hasCtlClass){var e=this.tplCtl=new this.$Class;if(D(e,"$template")&&(e.$template=this),D(e,"$logger")){var t=this.view;e.$logger={log:le.log,error:function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];fe(t,e+(n.length?" "+n.join(" "):""))}}}e[ve]&&Ie(this.view,e[ve],this.staticCache)}return this.tplCtl},enumerable:!0,configurable:!0}),e.prototype.attach=function(e){if(this.view.rootDomNode)fe(this.view,"Template host cannot be changed once set");else{var t=this.view;if(!t.doc)throw new Error("[iv] Template.document must be defined before calling Template.attach()");t.rootDomNode=e,t.anchorNode=t.doc.createComment("template anchor"),At(t.anchorNode,e)}return this},e.prototype.registerLabel=function(e,t){this.labels||(this.labels={});var n=this.labels[e];n?n.push(t):n=this.labels[e]=[t]},e.prototype.query=function(e,t){if(void 0===t&&(t=!1),this.rendering)return null;for(var n=[],i=0,o=e.split(";");i<o.length;i++){var r=o[i];if(r&&"#"!==r.charAt(0))return fe(this.view,"[$template.query()] Invalid label argument: '"+r+"' (labels must start with #)"),null;var a=this.labels&&this.labels[r]||null;if(a&&a.length){if(!t)return a[0];n=n.concat(a)}}return n.length?n:null},e.prototype.notifyChange=function(){this.render()},e.prototype.disconnectObserver=function(){this.activeWatch&&(j(this.api,this.watchCb),j(this.controller,this.watchCb),this.activeWatch=!1)},e.prototype.render=function(e,t){if(void 0===t&&(t=!1),this.processing)return this;t&&(this.forceRefresh=!0),this.processing=!0;var n=this.api,i=this.controller,o=this.view,r=this.$contextIdentifiers;i&&!I(i)&&(fe(o,"Template controller must be a @Controller Object - please check: "+this.$Class.name),this.tplCtl=this.$Class=void 0);var a=!1;if(n&&e)if(r!==ue){var s=e.context;s!==ue&&"object"==typeof s&&(a=!0)}else for(var d in P(n)||te(),this.disconnectObserver(),e)e.hasOwnProperty(d)&&(n[d]=e[d]);if(this.$contextInitialized&&(a=!0),a){var c="",l=(e?e.context:null)||n.$context;if(l){for(var f=0;r.length>f;f++)n[c=r[f]]=l[c];n.$context=l,this.$contextInitialized=!0}}r===ue||this.$contextInitialized||fe(o,"Missing $fragment context");var u=!this.forceRefresh,p=o.nodes;if(p&&p[0]&&p[0].attached||(u=!1),u&&N(n)+N(i)>this.lastRefreshVersion&&(u=!1),!u){i&&(this.initialized||(Pe(o,i,"$init","controller"),this.initialized=!0),Pe(o,i,"$beforeRender","controller")),this.rendering=!0,this.labels=void 0,o.lastRefresh++,o.instructions=void 0;try{this.renderFn(o,this.hasCtlClass?i:n,n,this)}catch(e){fe(o,"Template execution error\n"+(e.message||e))}this.rendering=!1,i&&Pe(o,i,"$afterRender","controller"),function(e,t){if(void 0===t&&(t=!1),e){var n=e.ΔMd;n&&n.refreshCtxt?n.refreshCtxt.refresh(!0):t&&te()}}(n),this.forceRefresh=!1,this.lastRefreshVersion=N(n)+N(i)}return this.activeWatch||($(n,this.watchCb),i&&$(i,this.watchCb),this.activeWatch=!0),this.processing=!1,this},e}();function Ie(e,t,n){var i=n.events;if(void 0===i){var o=void 0;for(var r in t)if(r.match(he)){var a=RegExp.$1;o||(o=[]),"function"!=typeof t[a+"Emitter"].init?fe(e,"Invalid EventEmitter: "+a+"Emitter"):(o.push(a+"Emitter"),o.push(a),t[a+"Emitter"].init(a,t))}n.events=o||null}else if(null!==i)for(var s=i.length,d=0;s>d;d+=2)t[i[d]].init(i[d+1],t)}function Pe(e,t,n,i){if(t&&"function"==typeof t[n]){var o=void 0;try{void 0!==(o=t[n]())&&"function"==typeof o.catch&&o.catch((function(t){fe(e,i+" "+n+" hook execution error\n"+(t.message||t))}))}catch(t){fe(e,i+" "+n+" hook execution error\n"+(t.message||t))}}}function $e(e,t){return(t=t||this.namespace)?this.doc.createElementNS(t,e):this.doc.createElement(e)}function je(){return function(e){if(e!==ue&&null!==e){var t=!0;return Vt(e,!1,(function(e){if(!t)return!1;var n=e.kind;if("#view"===n){var i=e;if(i.cm){var o=i.doc.createDocumentFragment();i.domNode=o,i.cmAppends=[function(e){e.domNode?At(e.domNode,o):e.domNode=o}]}ze(i)}else if("#element"===n||"#text"===n)return t=!1;return!0})),t}return!0}(this)}function Ae(e,t,n,i){var o={kind:"#view",uid:"view"+ ++ce,attached:!1,nodes:null,namespace:void 0,namespaces:void 0,doc:null,parentView:e,cm:!0,cmAppends:null,lastRefresh:0,container:null,projectionHost:null,template:i,rootDomNode:null,anchorNode:null,expressions:void 0,oExpressions:void 0,instructions:void 0,paramNode:void 0,createElement:$e,isEmpty:je};return e?Ve(o,e,t):o.doc="undefined"!=typeof document?document:null,o}function Oe(e,t,n){if(n){var i=function(e){var t=e;for(;t&&!t.template;)t=t.parentView;return t}(e);if(i!==ue&&null!==i)for(var o=i.template,r=n.length,a=0;r>a;a++)o.registerLabel(n[a],t)}}function Ve(e,t,n){if(e.parentView=t,e.doc=t.doc,e.container=n,e.rootDomNode=t.rootDomNode,t.namespace){var i=t.namespace;e.namespace=i,e.namespaces=[i]}}function Fe(e,t,n,i,o,r){return function(){return new De(e,t,n,i,o,r)}}var Re=[];function Le(e,t,n){var i=e.cm;return i?(e.nodes=new Array(n),e.cmAppends||(e.cmAppends=[],e.anchorNode&&(e.cmAppends[0]=function(t,n){t.domNode?Ot(t.domNode,e.anchorNode,e.rootDomNode):t.domNode=e.rootDomNode}))):e.cmAppends=null,i}function Se(e,t,n,i,o){var r,a=e.nodes[n];if(a&&a.attached||fe(e,"Invalid ζview call: container must be attached ("+(a?a.uid:"XX")+") - pview: "+e.uid+" containerIdx: "+n),"#container"===a.kind)if("##block"===a.subKind){var s=(d=a).views;1===o&&(d.insertFn=null),1===o&&d.views.length>1?(d.previousNbrOfViews=s.length,r=s.shift(),d.viewPool.length?d.viewPool=s.concat(d.viewPool):d.viewPool=s,d.views=[r]):(r=d.views[o-1])||(d.viewPool.length>0?(d.insertFn||(d.insertFn=He(e,d)),Ke((r=s[o-1]=d.viewPool.shift()).nodes[0],d.insertFn),r.attached=!0):((r=s[o-1]=Ae(e,d)).nodes=new Array(i),e.cm&&d.cmAppend?r.cmAppends=[d.cmAppend]:e.cm||(r.cmAppends=[He(e,d)]))),d.lastRefresh=r.lastRefresh=e.lastRefresh}else{var d;(r=(d=a).contentView)||((r=d.contentView=Ae(e,d)).nodes=new Array(i)),r.lastRefresh=e.lastRefresh}else if("#param"===a.kind){var c=a;(r=c.contentView)||(r=c.contentView=Ae(e,null),c.viewPool&&(c.viewPool[c.viewInstanceIdx]=r),r.nodes=new Array(i),r.paramNode=c),r.lastRefresh=e.lastRefresh}return r}function Ee(e,t,n,i,o,r){var a=r||Se(e,0,n,i,o);if(1===t)a.instructions=[];else{for(var s=a,d=t-1;d>0;)s=s.parentView,d--;s.instructions||(s.instructions=[]),a.instructions=s.instructions}return a.cm&&!a.cmAppends&&Me(a,Te,[a,e,n]),a}function Te(e,t,n){var i=t.nodes[n];"#container"===i.kind&&!e.cmAppends&&i.cmAppend&&(e.cmAppends=[i.cmAppend])}function Me(e,t,n){e.instructions.push(t),e.instructions.push(n)}function ze(e){if(e.instructions){var t=e.instructions.slice(0),n=t.length;if(e.instructions.splice(0,n),e.instructions=void 0,n)for(var i=0;n>i;i+=2)t[i].apply(null,t[i+1])}}function He(e,t){var n=function e(t,n){for(;;){if(n||fe(t,"Internal error - findNextSiblingDomNd: nd cannot be undefined"),0===n.idx){if(!n.attached)return{position:"defer",parentDomNd:void 0};if(n.domNode.nodeType===pe)return{position:"lastChild",parentDomNd:n.domNode};var i=t.parentView;if(i){if(t.projectionHost){var o=t.projectionHost.hostNode;return"#element"===o.kind?{position:"lastChild",parentDomNd:o.domNode}:e(t.projectionHost.view,o)}if(t.container&&"##block"===t.container.subKind){var r=t.container,a=r.views.indexOf(t);if(a>-1)for(var s=void 0,d=void 0,c=a+1;c<r.views.length;c++)if((s=r.views[c]).nodes&&s.nodes.length&&(d=m(s,s.nodes[0],r.domNode)))return d;for(var l=r.viewPool,f=void 0,u=0,p=l;u<p.length;u++){if((s=p[u]).nodes&&s.nodes.length&&s.attached&&(f=m(s,s.nodes[0],r.domNode)))return f}}return e(i,t.container)}return{position:"lastOnRoot",parentDomNd:t.rootDomNode,nextDomNd:t.anchorNode}}if(!n.nextSibling){var v=t.nodes[n.parentIdx];return"#element"===v.kind?{position:"lastChild",parentDomNd:ht(t,n)}:e(t,v)}var h=m(t,n.nextSibling,ht(t,n));if(h)return h;n=n.nextSibling}function m(e,t,n){if(!t)return null;if("#element"===t.kind||"#text"===t.kind)return{position:"beforeChild",nextDomNd:t.domNode,parentDomNd:n};if("#fragment"===t.kind){for(var i=void 0,o=t.firstChild;o;){if(i=m(e,o,n))return i;o=o.nextSibling}if(t.contentView){var r=t.contentView;if(r.nodes)return m(r,r.nodes[0],n)}return null}if("#container"===t.kind){var a=t;i=null;if("##block"===a.subKind)for(var s=a.views,d=s.length,c=0;d>c&&!(i=m(s[c],s[c].nodes[0],n));c++);else if("##cpt"===a.subKind){var l=a.template.view;i=m(l,l.nodes[0],n)}return i||null}throw new Error("TODO findFirstDomNd: "+t.kind)}}(e,t),i=n.position,o=n.nextDomNd,r=n.parentDomNd;return"beforeChild"===i||"lastOnRoot"===i?function(e,t){e.domNode?Ot(e.domNode,o,r):e.domNode=r}:"lastChild"===i?function(e,t){e.domNode?At(e.domNode,r):e.domNode=r}:function(){console.warn("TODO: VALIDATE VIEW APPEND: ",i),function(e,t,n){void 0===t&&(t="");n&&e.uid!==n||(console.log(""),console.log(Ft),t&&console.log(t+":"),function e(t,n){void 0===n&&(n="");if(!t.nodes)return void console.log(""+n+t.uid+" - no nodes");var i=t.parentView?t.parentView.uid:"XX",o=t.projectionHost,r=o?" >>> projection host: "+o.hostNode.uid+" in "+o.view.uid:"";console.log(n+"*"+t.uid+"* cm:"+t.cm+" isTemplate:"+(void 0!==t.template)+" parentView:"+i+r);for(var a,s=t.nodes.length,d="",c=0;s>c;c++)if(a=t.nodes[c])if(d=a.uid.length<5?["     ","    ","   ","  "," "][a.uid.length]:"","#container"===a.kind){var l=a,f=l.domNode?l.domNode.uid:"XX";if(console.log(n+"["+c+"] "+a.uid+d+" "+f+" attached:"+(a.attached?1:0)+" parent:"+C(a.parentIdx)+" nextSibling:"+(a.nextSibling?a.nextSibling.uid:"X")),"##block"===l.subKind){var u=l,p=u.views.length;if(p)for(var v=0;p>v;v++)if(u.views[v]){var h=u.views[v];f=h.rootDomNode?h.rootDomNode.$uid:"XX",console.log(n+"  - view #"+v),e(u.views[v],"    "+n)}else console.log(n+"  - view #"+v+" UNDEFINED");else console.log(n+"  - no child views")}else if("##cpt"===l.subKind){var m=l,g=m.template,w=m.contentView;w?(console.log(n+"  - light DOM:"),e(w,"    "+n)):console.log(n+"  - light DOM: none"),g?(console.log(n+"  - shadow DOM:"),e(g.view,"    "+n)):console.log(n+"  - no template")}else console.log(n+"  - "+l.subKind+" container")}else{f=a.domNode?a.domNode.uid:"XX";var y="";if(a.domNode&&"#text"===a.kind)y=" text=#"+a.domNode._textContent+"#";else if("#fragment"===a.kind||"#element"===a.kind){for(var b=[],x=a.firstChild;x;)b.push(x.uid),x=x.nextSibling;y=" children:["+b.join(", ")+"]";var N=a.contentView;N&&(y+=" >>> content view: "+N.uid)}console.log(n+"["+a.idx+"] "+a.uid+d+" "+f+" attached:"+(a.attached?1:0)+" parent:"+C(a.parentIdx)+" nextSibling:"+(a.nextSibling?a.nextSibling.uid:"X")+y)}else console.log(n+"["+c+"] XX");function C(e){return e<0?"X":e}}(e))}(e,"getViewInsertFunction for "+t.uid)}}function Be(e,t,n){var i=e.nodes[t];if(i&&"##block"===i.subKind){var o=i,r=o.lastRefresh;if(n||r===e.lastRefresh){var a=o.views.length;if(!n){if(a!==o.previousNbrOfViews)for(var s=o.viewPool,d=s.length,c=void 0,l=0;d>l;l++)mt(c=s[l],c.nodes[0]),c.attached=!1;o.previousNbrOfViews=a}}else mt(e,o)}}function Ke(e,t,n){if(!e.attached){if(t(e,!0),e.attached=!0,"#fragment"===e.kind)for(var i=e.firstChild;i;)Ke(i,t),i=i.nextSibling;else if("#container"===e.kind){var o=e.subKind;if("##cpt"===o){var r=e.template,a=r?r.view.nodes[0]:null;r&&(r.forceRefresh=!0),a&&(Ke(a,t),r.view.attached=!0)}else if("##block"===o)for(var s=e.views,d=0;s.length>d;d++)Ke(s[d].nodes[0],t),s[d].attached=!0}if("#fragment"===e.kind||"#element"===e.kind){var c=e.contentView;c&&(Ke(c.nodes[0],t),c.attached=!0)}}}function Xe(e,t,n){if(n)for(var i=n.length,o=0;i>o;o++)Be(e,n[o],e.cm);e.cm&&(e.cm=!1,e.cmAppends=null)}function Je(e,t,n){if(e.paramNode){var i=e.paramNode;i.dataHolder?(Me(e,Xe,[e,t,n]),i.data&&"#view"!==i.data.kind?i.data?i.data.$content=e:console.warn("TODO: ζendD no data"):i.dataHolder[i.dataName]=e):fe(e,"ζendD dataHoler should be defined")}else Me(e,Xe,[e,t,n])}function qe(e,t,n,i,o,r,a,s,d){if(t){var c=e.createElement(o);if(s)for(var l=s.length,f=0;l>f;f+=2)c.setAttribute(s[f],s[f+1]);if(d){l=d.length;for(var u=0;l>u;u+=2)c[d[u]]=d[u+1]}var p={kind:"#element",uid:"elt"+ ++ce,idx:n,parentIdx:-1,ns:"",domNode:c,attached:!0,nextSibling:void 0,firstChild:void 0,lastChild:void 0,contentView:null};e.nodes[n]=p,Oe(e,c,a),e.cmAppends[i](p,!1),r&&(e.cmAppends[i+1]=function(e,t){e.domNode?At(e.domNode,c):e.domNode=c,t||Ue(p,e)})}else a&&Oe(e,e.nodes[n].domNode,a)}function _e(e,t,n,i,o,r,a,s,d){t&&Me(e,qe,[e,t,n,i,o,r,a,s,d])}function We(e,t,n){if(n)e.namespaces?e.namespaces.push(n):e.namespaces=[n],e.namespace=n;else{var i=e.namespaces.length;1===i?e.namespace=e.namespaces=void 0:(e.namespaces.pop(),e.namespace=e.namespaces[i-2])}}function Ue(e,t){e.firstChild?(e.lastChild.nextSibling=t,e.lastChild=t):(e.firstChild=e.lastChild=t,t.nextSibling=void 0),t.parentIdx=e.idx}function Ge(e,t,n,i,o,r,a,s){for(var d,c=[],l=8;l<arguments.length;l++)c[l-8]=arguments[l];if(s){var f=void 0,u=void 0,p=!1;f=t?a.slice(0):(d=e.nodes[i]).pieces;for(var v=0;s>v;v++)(u=Ye(e,n,c[v]))!==Re&&(p=!0,f[1+2*v]=null==u?"":u);if(!t)return p&&(d.domNode.textContent=f.join("")),void Oe(e,d.domNode,r);d=h(e.doc.createTextNode(f.join("")),f),Oe(e,d.domNode,r)}else{if(!t)return void(r&&Oe(e,e.nodes[i].domNode,r));d=h(e.doc.createTextNode(a),void 0),Oe(e,d.domNode,r)}function h(e,t){return{kind:"#text",uid:"txt"+ ++ce,domNode:e,attached:!0,idx:i,parentIdx:-1,pieces:t,nextSibling:void 0}}e.nodes[i]=d,e.cmAppends[o](d,!1)}function Ze(e,t,n,i,o,r,a,s){for(var d=[],c=8;c<arguments.length;c++)d[c-8]=arguments[c];for(var l=[e,t,n,i,o,r,a,s],f=0;s>f;f++)l.push(d[f]);Me(e,Ge,l)}function Qe(e,t,n){if(e.expressions){var i=e.expressions;if(i.length>t&&i[t]===n)return Re;i[t]=n}else e.expressions=[],e.expressions[t]=n;return n}function Ye(e,t,n){if(t){if(n[2]){var i=e.oExpressions;return i[2*n[0]]?Re:(i[2*n[0]]=1,n[1])}return Qe(e,n[0],n[1])}return n}function et(e,t,n,i){if(t){var o={kind:"#fragment",uid:"fra"+ ++ce,idx:n,parentIdx:-1,ns:"",domNode:void 0,attached:!0,nextSibling:void 0,firstChild:void 0,lastChild:void 0,contentView:null};e.nodes[n]=o;var r=e.cmAppends[i];r(o,!1),e.cmAppends[i+1]=function(e,t){r(e,!0),t||Ue(o,e)}}}function tt(e,t,n,i,o){if(t){var r=function(e,t,n){var i;if(1===n)i={kind:"#container",subKind:"##block",uid:"cnb"+ ++ce,idx:e,parentIdx:-1,ns:"",domNode:void 0,attached:!0,nextSibling:void 0,views:[],viewPool:[],cmAppend:t,lastRefresh:0,previousNbrOfViews:0,insertFn:null};else{if(2!==n)return console.warn("TODO: new cnt type"),null;i={kind:"#container",subKind:"##cpt",uid:"cnc"+ ++ce,idx:e,parentIdx:-1,ns:"",domNode:void 0,attached:!0,nextSibling:void 0,cmAppend:t,cptRef:null,template:null,data:null,contentView:null,dynamicParams:void 0}}return i}(n,null,o);return e.nodes[n]=r,function(e,t,n){if(e.cmAppends){var i=e.cmAppends[n];i?(t.cmAppend=function(e,t){i(e,!0)},i(t,!1)):console.log("ERROR?",i===ue)}}(e,r,i),r}}function nt(e,t,n,i,o,r,a,s,d,c){var l;n=n||0,t?l=e.nodes[i]||tt(e,t,i,o,2):(l=e.nodes[i]).lists&&(l.lists.sizes={});var f=Ye(e,n,r);if(l.template){if(f!==Re&&l.cptRef!==f){var u=l.data;l.template.dispose(!0),m();var p=l.data;for(var v in u)if(u.hasOwnProperty(v)&&v.match(ge)){var h=RegExp.$1;D(p,h)&&(p[h]=u[h])}}}else{if(f===Re)return void fe(e,"Invalid component ref");m()}function m(){var t=l.template=f();l.cptRef=f,Ve(t.view,e,l),t.disconnectObserver(),l.data=t.api,function(t){if(d){var n=d.length;if(!t&&n)fe(e,"Invalid parameter: "+d[0]);else for(var i=0;n>i;i+=2)D(t,d[i])?t[d[i]]=d[i+1]:fe(e,"Invalid parameter: "+d[i])}}(t.api)}c&&(l.dynamicParams={}),0===n&&a&&it(e,i,l,s,c)}function it(e,t,n,i,o){var r=(n=n||e.nodes[t])?n.template:void 0;if(void 0!==r){if(r.view.lastRefresh=e.lastRefresh-1,rt(n),n.contentView){r.api.$content=n.contentView;var a=n.contentView.instructions;a&&a.length&&(r.forceRefresh=!0)}if(r.view.cm)r.view.cmAppends=[n.cmAppend];else{if(o)for(var s=o.length,d=(n?n.dynamicParams:{})||{},c=r.api,l=0;s>l;l++)d[o[l]]||O(c,o[l]);var f=r.view.nodes[0];if(!f.attached)r.forceRefresh=!0,Ke(f,He(e,n))}i&&Oe(e,r.api,i),r.render()}}function ot(e,t,n,i,o,r,a,s,d,c){var l,f=e.nodes,u=!1;if(f[i]){var p=(l=f[i]).viewPool;a>0&&!p&&((p=l.viewPool=[])[l.viewInstanceIdx]=l.contentView),p&&(l.contentView=p[a]),l.viewInstanceIdx=a,l.dataHolder=l.data=void 0,u=!0}else l={kind:"#param",uid:"pnd"+ ++ce,idx:i,parentIdx:o,nextSibling:void 0,domNode:void 0,attached:!0,dataName:r,dataHolder:void 0,data:void 0,dataIsList:void 0,contentView:void 0,dynamicParams:void 0,viewInstanceIdx:a,viewPool:void 0},f[i]=l;c&&(l.dynamicParams={});var v,h=f[o],m=r,g=void 0,w=h.data;if(w){if(l.dataHolder=w,void 0===l.dataIsList&&function(e,t,n,i){D(i,n)?t.dataIsList=!1:D(i,n+"List")?(t.dataIsList=!0,t.dataName=n+"List"):fe(e,"Invalid parameter node: <."+n+">")}(e,l,m,w),m=l.dataName,g=l.data,l.dataIsList){var y=h.lists;y||(y=h.lists={sizes:{},listNames:[],listMap:{}}),y.listMap[m]||(y.listMap[m]=1,y.listNames.push(m));var b=y.sizes[m];b||(b=y.sizes[m]=0),(v=w[m][b])||(v=A(w[m],b)),y.sizes[m]+=1,l.data=v}else l.data=v=w[m],void 0===v&&(l.data=v=A(w,m));u&&v&&v["ΔΔ$content"]&&(l.contentView=v["ΔΔ$content"])}else fe(e,"Invalid parameter node <."+r+"/>: no param node can be used in this context");l.lists&&(l.lists.sizes={});var x=h.dynamicParams;if(x&&(x[m]=1),d)if(v){if(g!==v)for(var N=d.length,C=0;N>C;C+=2)t&&!D(v,d[C])&&fe(e,"Invalid param node parameter: "+d[C]),v[d[C]]=d[C+1]}else fe(e,"Invalid param node parameter: "+d[0])}function rt(e){if(e.lists)for(var t=e.lists,n=t.listNames,i=void 0,o=void 0,r=void 0,a=void 0,s=0;n.length>s;s++)i=n[s],(o=t.sizes[i]||0)<(a=(r=e.data[i]).length)&&r.splice(o,a-o)}function at(e,t,n,i,o,r){var a=e.nodes[i];if(rt(a),r)for(var s=r.length,d=a.dynamicParams,c=0;s>c;c++)d&&!d[r[c]]&&O(a.data,r[c]);void 0!==a.contentView&&W(a.dataHolder)}function st(e,t,n,i,o){if(o!==Re){var r=Ye(e,t,o);if(r!==Re){var a=e.nodes[n].domNode;void 0===r?a.removeAttribute(i):a.setAttribute(i,r)}}}function dt(e,t,n,i,o,r){if(r!==Re){var a=Ye(e,n,r);if(a!==Re){var s=e.nodes[i],d=s.kind;if("#container"===d){var c=s.data;(function(e,t,n,i,o){if(i&&(!e.cm||D(i,o)))return!0;var r="";n.template&&(r=" on <*"+n.template.templateName+"/>");return fe(e,"Invalid parameter '"+o+"'"+r),!1})(e,0,s,c,o)&&(c[o]=a)}else if("#param"===d)!function(e,t,n,i,o){if(0===o){if(n.dataHolder)return n.dataHolder[n.dataName]=i,n.dataHolder}else{if(n.data)return t&&!D(n.data,o)&&fe(e,"Invalid param node parameter: "+o),n.data[o]=i,n.data;fe(e,"Invalid param node parameter: "+o)}}(e,t,s,a,o);else if("#decorator"===d){var l=s;t&&!lt(e,l,o)||(l.api[o]=a)}}}}function ct(e,t,n,i,o,r,a,s,d,c,l){var f;if(t){var u=e.nodes;if(void 0===a)fe(e,"Undefined decorator reference: @"+r);else if("function"!=typeof a&&!0!==a.$isDecorator)fe(e,"Invalid decorator reference: @"+r);else{var p=new a.$apiClass,v=a(p);if(f={kind:"#decorator",uid:"deco"+ ++ce,idx:i,parentIdx:o,attached:!0,nextSibling:void 0,domNode:void 0,instance:v,api:p,refName:"@"+r,validProps:!0},u[i]=f,c)for(var h=c.length,m=0;h>m;m+=2)lt(e,f,c[m]),p[c[m]]=c[m+1]}}else f=e.nodes[i];if(f!==ue){p=f.api;1===s&&function(e,t,n){var i=t.api,o=i[xe];o===ue?fe(e,t.refName+" doesn't define any default parameter"):i[o]=n}(e,f,d),Oe(e,p,l)}}function lt(e,t,n){return!!D(t.api,n)||(fe(e,"Invalid decorator parameter '"+n+"' on "+t.refName),!1)}function ft(e,t,n){if(t){var i=n.api,o=e.nodes[n.parentIdx],r=null,a=null;if(void 0===o.kind)r=o;else if("#element"===o.kind)r=o.domNode;else if("#container"===o.kind&&"##cpt"===o.subKind){var s=o.template;a=s.api,r=s.query("#main")}else fe(e,"Invalid decorator target for "+n.refName);null!==r&&D(i,"$targetElt")&&(i.$targetElt=r),null!==a&&D(i,"$targetApi")&&(i.$targetApi=a),n.validProps=function(e,t,n,i){if(t[Ne]!==ue){var o=t[Ne],r=void 0,a=!0;for(var s in o)if((r=t[o[s]])===ue||null===r){var d=Dt(o[s]);i!==ue&&i[d]!==ue?fe(e,(n+" "+d).replace(we,i[d])):fe(e,d+" property is required for "+n),a=!1}return a}return!0}(e,n.api,n.refName,Ce),n.validProps&&Pe(e,n.instance,"$init",n.refName)}n.validProps&&Pe(e,n.instance,"$render",n.refName)}function ut(e,t,n,i){var o=e.nodes[i];o!==ue&&ft(e,t,o)}function pt(e,t,n,i,o,r,a,s){if(t){var d=e.nodes[i];if("#element"===d.kind){var c=d.domNode;if(!c)return void fe(e,"Cannot set "+o+" event listener: undefined DOM node");var l=p(c);a&&!1!==(s=s||{}).passive&&(s.passive=!0),c.addEventListener(o,(function(e){l.callback&&l.callback(e)}),s)}else if("#container"===d.kind){var f=d.template;f?u(f.api,!1):fe(e,"Cannot set "+o+" event listener: undefined component template")}else"#param"===d.kind?u(d.data,!0):"#decorator"===d.kind&&u(d.api,!0)}else e.nodes[n].callback=r;function u(t,n){if(t&&D(t,o+"Emitter")){var i=t[o+"Emitter"];if(i.addListener&&"function"==typeof i.addListener){var r=p(null);i.addListener((function(e){r.callback&&r.callback(e)})),n&&"function"==typeof i.init&&i.init(o,t)}else fe(e,"Invalid event emitter for: "+o)}else fe(e,"Unsupported event: "+o)}function p(t){var o={kind:"#listener",uid:"evt"+ ++ce,idx:n,parentIdx:i,nextSibling:void 0,domNode:t,attached:!0,callback:r};return e.nodes[n]=o,o}}function vt(e,t,n,i,o){var r,a=e.nodes[n];if(1===o)if(i[be]){if(D(i,ve)){var s=i[ve];s!==ue&&(r=s.$content)}}else D(i,"$content")&&(r=i.$content);else r=Ye(e,t,i);if(r!==Re&&void 0!==i||(r=a.contentView),r){var d=r.projectionHost;if(d&&d.hostNode!==a&&mt(r,r.nodes[0]),a.contentView&&a.contentView!==r&&mt(a.contentView,a.contentView.nodes[0]),a.contentView=r,r.projectionHost={view:e,hostNode:a},r.cm)if("#element"===a.kind){var c=a.domNode;r.cmAppends=[function(e){e.domNode?At(e.domNode,a.domNode):e.domNode=c}]}else r.cmAppends=[He(e,a)];else{var l=void 0,f=!1;if(r.domNode!==ue&&null!==r.nodes&&r.domNode.nodeType===pe&&(At(r.nodes[0].domNode,a.domNode),function(e,t,n){if(!e||e.cm||!e.nodes||!e.nodes.length)return;n===ue&&(n=e.domNode);if(n===ue||t===n)return;Vt(e,!0,(function(e){return"#view"!==e.kind&&"#fragment"!==e.kind&&"#container"!==e.kind||e.domNode===n&&(e.domNode=t),!0}))}(r,a.domNode),f=!0),!f){if("#element"===a.kind){var u=a.domNode;l=function(e,t){e.domNode?At(e.domNode,u):e.domNode=u}}else l=He(e,a);Ke(r.nodes[0],l)}}r.container=a,ze(r)}}function ht(e,t){if(0===t.idx&&e.projectionHost){if(!t.attached)return null;var n=e.projectionHost.hostNode;return"#element"===n.kind?n.domNode:ht(e.projectionHost.view,n)}return 0===t.idx?e.parentView?ht(e.parentView,e.container):e.rootDomNode:e.nodes[t.parentIdx].domNode}function mt(e,t){if(t&&t.attached)if("#text"===t.kind||"#element"===t.kind){var n=ht(e,t);t.attached=!1,n?n.removeChild(t.domNode):fe(e,"Internal error - parent not found for: "+t.uid)}else if("#container"===t.kind){if("##block"===t.subKind){for(var i=t,o=i.views,r=o.length,a=void 0,s=0;r>s;s++)a=o[s].nodes[0],mt(o[s],a),o[s].attached=a.attached=!1,"#container"!==a.kind&&"#fragment"!==a.kind||(a.domNode=void 0);i.views=[],i.previousNbrOfViews=0,i.viewPool=o.concat(i.viewPool)}else if("##cpt"===t.subKind){var d=t.template;a=d.view.nodes[0];mt(d.view,a),d.view.attached=a.attached=!1,"#container"!==a.kind&&"#fragment"!==a.kind||(a.domNode=void 0)}}else if("#fragment"===t.kind){var c=t;if(c.attached=!1,c.contentView)mt(c.contentView,c.contentView.nodes[0]);else if(c.firstChild)for(var l=c.firstChild;l;)mt(e,l),l=l.nextSibling;c.domNode=void 0}else"#param"===t.kind?console.warn("TODO removeFromDom for param nodes"):console.warn("RemoveFromDom for "+t.kind)}var gt=F,wt=R,yt=function(e){var t=e.ΔFactory;if(t)return t;function n(){return new e}return n[d]=!0,e[a]=n,n},bt=E,xt=M,Nt=ae,Ct=L;function kt(e){e.prototype[ye]=!0,F(e)}function Dt(e){return e.replace(me,"")}function It(e,t){return!0===e.prototype[t]}function Pt(e,t){return t.$apiClass=e,t.$isDecorator=!0,t}function $t(e,t){e[xe]=Dt(t)}function jt(e,t){var n=e[Ne];n===ue&&(n=e[Ne]=[]),n.push(t)}function At(e,t,n){t.appendChild(e)}function Ot(e,t,n,i){n.insertBefore(e,t)}function Vt(e,t,n){if(e!==ue&&null!==e){if(!n(e))return!1;if(null!==e.nodes&&e.nodes.length)for(var i=0,o=e.nodes;i<o.length;i++){if(!r(o[i]))return!1}}return!0;function r(e){var i=e.kind;if("#fragment"===i)return!!n(e)&&Vt(e.contentView,t,n);if("#container"!==i)return n(e);if(!n(e))return!1;var o=e,r=o.subKind;if("##block"===r){var a=o.views;if(null!==a)for(var s=0,d=a;s<d.length;s++){if(!Vt(d[s],t,n))return!1}if(t&&o.viewPool)for(var c=0,l=o.viewPool;c<l.length;c++){if(!Vt(l[c],t,n))return!1}}else if("##cpt"===r){var f=o.template;if(null!==f)return Vt(f.view,t,n)}else"##async"===r&&console.log("TODO: support scanNode for @async block");return!0}}var Ft="-------------------------------------------------------------------------------";var Rt,Lt,St,Et,Tt,Mt,zt,Ht=(Rt={},Lt=["width","105px","height","44px","viewBox","0 0 105 44"],St=["transform","translate(3,3)","fill","none","fill-rule","nonzero","stroke-linecap","round","stroke-width","7"],Et=["d","M12.5,0.5 L0.5,21.5"],Tt=["stroke-linejoin","round","points","55.5 0.5 43.2291116 21.5970036 31.1303622 0.5"],Mt=["stroke-linejoin","round","points","98.3696378 1 86.1524963 22.0575024 77.9815673 36.5759163 86.1848189 22.0575024 74 1"],zt=function(){function n(){this.ΔΔclassName="ivyLogoDark"}return n.prototype.ΔDefault=function(e){switch(e){case"className":return"ivyLogoDark"}return Ct},e([wt(),t("design:type",Object)],n.prototype,"className",void 0),n=e([gt],n)}(),Fe("ivyLogo",".../doc/widgets.ts",Rt,(function(e,t,n){var i=n.className,o=Le(e,0,5);We(e,0,"http://www.w3.org/2000/svg"),qe(e,o,0,0,"svg",1,0,Lt),st(e,0,0,"class",Qe(e,0,i)),qe(e,o,1,1,"g",1,0,St),qe(e,o,2,2,"path",0,0,Et),qe(e,o,3,2,"polyline",0,0,Tt),qe(e,o,4,2,"polyline",0,0,Mt),We(e),Xe(e)}),zt)),Bt=function(){var n={},i=["width","38px","height","21px","viewBox","0 0 38 21"],o=["class","triangle","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd","stroke-linejoin","round"],r=["transform","translate(-308, -180)","fill-rule","nonzero"],a=["points","327 181 345 201 309 201"],s=function(){function n(){this.ΔΔpos="top"}return n.prototype.ΔDefault=function(e){switch(e){case"pos":return"top"}return Ct},e([wt(bt),t("design:type",String)],n.prototype,"pos",void 0),n=e([gt],n)}();return Fe("triangle",".../doc/widgets.ts",n,(function(e,t,n){var s=n.pos,d=Le(e,0,4),c="top"===s?-.8:.8;We(e,0,"http://www.w3.org/2000/svg"),qe(e,d,0,0,"svg",1,0,i),st(e,0,0,"class",Qe(e,0,s)),qe(e,d,1,1,"g",1,0,o),qe(e,d,2,2,"g",1,0,r),qe(e,d,3,3,"polygon",0,0,a),st(e,0,3,"transform",Qe(e,1,"translate(327, 191) scale(1, "+c+") translate(-327, -188) ")),We(e),Xe(e)}),s)}(),Kt=/top/,Xt=/bottom/,Jt=function(){var n={},i=["pos","top"],o=["pos","bottom"],r=[1,3],a=function(){function n(){this.ΔΔindicators="top"}return n.prototype.ΔDefault=function(e){switch(e){case"indicators":return"top"}return Ct},e([wt(),t("design:type",Object)],n.prototype,"$content",void 0),e([wt(),t("design:type",Object)],n.prototype,"indicators",void 0),n=e([gt],n)}();return Fe("code",".../doc/widgets.ts",n,(function(e,t,n){n.$content;var a,s,d=n.indicators,c=0,l=0,f=Le(e,0,4);qe(e,f,0,0,"div",1),st(e,0,0,"class",Qe(e,0,"code "+d.replace(";"," "))),tt(e,f,1,1,1),d.match(Kt)&&(nt(a=Se(e,0,1,1,++c),a.cm,0,0,0,Qe(a,0,Bt),1,0,i),Xe(a)),et(e,f,2,1),vt(e,0,2,t,1),tt(e,f,3,1,1),d.match(Xt)&&(nt(s=Se(e,0,3,1,++l),s.cm,0,0,0,Qe(s,0,Bt),1,0,o),Xe(s)),Xe(e,0,r)}),a)}(),qt=function(){var n={},i=["class","title"],o=[" ",""," "],r=[1,3],a=[1,3,4],s=function(){function n(){this.ΔΔtitle="[title]",this.ΔΔclassName="variantA",this.ΔΔproportions="2;2;10;1"}return n.prototype.ΔDefault=function(e){switch(e){case"title":return"[title]";case"className":return"variantA";case"proportions":return"2;2;10;1"}return Ct},e([wt(),t("design:type",Object)],n.prototype,"title",void 0),e([wt(),t("design:type",Object)],n.prototype,"className",void 0),e([wt(),t("design:type",Object)],n.prototype,"proportions",void 0),e([wt(),t("design:type",Object)],n.prototype,"$content",void 0),n=e([gt],n)}();return Fe("infoBlock",".../doc/widgets.ts",n,(function(e,t,n){var s,d,c,l,f,u=n.title,p=n.className,v=n.proportions,h=(n.$content,0),m=0,g=0,w=Le(e,0,4);et(e,w,0,0);var y=v.split(";");tt(e,w,1,1,1),4!==y.length&&console.log("[*infoBlock] Invalid proportions value: "+v),qe(e,w,2,1,"div",1),st(e,0,2,"class",Qe(e,0,"infoBlock "+p)),tt(e,w,3,2,1);for(var b=0;4>b;b++)m=g=0,et(s=Se(e,0,3,5,++h),d=s.cm,0,0),tt(s,d,1,1,1),"0"!==y[b]&&(qe(s,d,2,1,"div",1),st(s,0,2,"style",Qe(s,0,"flex:"+y[b])),st(s,0,2,"class",Qe(s,1,2==b?"content":"")),tt(s,d,3,2,1),tt(s,d,4,2,1),1===b?(qe(c=Se(s,0,3,2,++m),l=c.cm,0,0,"div",1,0,i),Ge(c,l,0,1,1,0,o,1,Qe(c,0,u)),Xe(c)):2===b&&(et(f=Se(s,0,4,1,++g),f.cm,0,0),vt(f,0,0,t,1),Xe(f)),Xe(s,0,a));Xe(e,0,r)}),s)}(),_t=function(){function n(){}return e([R(E),t("design:type",String)],n.prototype,"name",void 0),e([R(),t("design:type",Object)],n.prototype,"$content",void 0),n=e([F],n)}(),Wt=function(){var n={},i=["class","notions"],o=["class","block"],r=["class","title"],a=[" Notion",""," covered in this example "],s=["class","notion"],d=["class","name"],c=[" ",""," "],l=[5],f=[3],u=function(){function n(){}return e([wt(Nt(yt(_t))),t("design:type",Array)],n.prototype,"notionList",void 0),n=e([gt],n)}();return Fe("notions",".../doc/widgets.ts",n,(function(e,t,n){var u,p,v,h,m=n.notionList,g=0,w=0,y=Le(e,0,6),b=m.length;qe(e,y,0,0,"div",1,0,i),qe(e,y,1,1,"div",1,0,o),qe(e,y,2,2,"div",1,0,r),Ge(e,y,0,3,3,0,a,1,Qe(e,0,1!==b?"s":"")),qe(e,y,4,2,"ul",1),tt(e,y,5,3,1);for(var x=0,N=m;x<N.length;x++){var C=N[x];w=0,qe(u=Se(e,0,5,4,++g),p=u.cm,0,0,"li",1,0,s),qe(u,p,1,1,"span",1,0,d),Ge(u,p,0,2,2,0,c,1,Qe(u,0,C.name)),tt(u,p,3,1,1),C.$content&&(et(v=Se(u,0,3,3,++w),h=v.cm,0,0),Ge(v,h,0,1,1,0," : ",0),et(v,h,2,1),vt(v,0,2,Qe(v,0,C.$content)),Xe(v)),Xe(u,0,f)}Xe(e,0,l)}),u)}(),Ut=function(){var e={},t=["class","svgDemoBtn","width","17px","height","18px","viewBox","0 0 17 18"],n=["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],i=["fill-rule","nonzero"],o=["d","M8,2.75 C3.99593556,2.75 0.75,5.99593556 0.75,10 C0.75,14.0040644 3.99593556,17.25 8,17.25 C12.0040644,17.25 15.25,14.0040644 15.25,10 C15.25,5.99593556 12.0040644,2.75 8,2.75 Z","id","Rectangle","stroke-width","1.5"],r=["fill","#FFFFFF","transform","translate(12.148310, 3.984250) rotate(-54.000000) translate(-12.148310, -3.984250) ","x","9.14830963","y","1.98425028","width","6","height","4"],a=["stroke-linejoin","round","transform","translate(13.609118, 5.913799) rotate(-26.000000) translate(-13.609118, -5.913799) ","points","13.6091182 3.91379881 16.1091182 7.91379881 11.1091182 7.91379881"];return Fe("reloadBtn",".../doc/widgets.ts",e,(function(e){var s=Le(e,0,6);We(e,0,"http://www.w3.org/2000/svg"),qe(e,s,0,0,"svg",1,0,t),qe(e,s,1,1,"g",1,0,n),qe(e,s,2,2,"g",1,0,i),qe(e,s,3,3,"path",0,0,o),qe(e,s,4,3,"rect",0,0,r),qe(e,s,5,3,"polygon",0,0,a),We(e),Xe(e)}))}(),Gt=function(){var e={},t=["class","svgDemoBtn","width","20px","height","20px","viewBox","0 0 20 20"],n=["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],i=["id","Open-outside","fill-rule","nonzero"],o=["d","M5.52969938,4.75 C3.18248919,4.75 1.27969938,6.65278981 1.27969938,9 L1.27969938,15 C1.27969938,17.3472102 3.18248919,19.25 5.52969938,19.25 L11.5296994,19.25 C13.8769096,19.25 15.7796994,17.3472102 15.7796994,15 L15.7796994,9 C15.7796994,6.65278981 13.8769096,4.75 11.5296994,4.75 L5.52969938,4.75 Z","stroke-width","1.5"],r=["transform","translate(11.135391, 8.656494) rotate(-42.000000) translate(-11.135391, -8.656494) translate(4.135391, 3.656494)"],a=["fill","#FFFFFF","x","0.875671632","y","0.627673419","width","13","height","9"],s=["transform","translate(2.412679, 2.833811)","stroke","#0D5598"],d=["fill","#0D5598","stroke-linejoin","round","transform","translate(7.369026, 2.595538) rotate(90.000000) translate(-7.369026, -2.595538) ","points","7.36902625 0.595537535 9.86902625 4.59553754 4.86902625 4.59553754"],c=["d","M0.131428293,3.64028132 L7.13142829,1.64028132","id","Line-2","stroke-width","1.5","stroke-linecap","round","stroke-linejoin","bevel","transform","translate(3.631428, 2.640281) rotate(12.000000) translate(-3.631428, -2.640281) "];return Fe("openOutsideBtn",".../doc/widgets.ts",e,(function(e){var l=Le(e,0,9);We(e,0,"http://www.w3.org/2000/svg"),qe(e,l,0,0,"svg",1,0,t),qe(e,l,1,1,"g",1,0,n),qe(e,l,2,2,"g",1,0,i),qe(e,l,3,3,"path",0,0,o),qe(e,l,4,3,"g",1,0,r),qe(e,l,5,4,"rect",0,0,a),qe(e,l,6,4,"g",1,0,s),qe(e,l,7,5,"polygon",0,0,d),qe(e,l,8,5,"path",0,0,c),We(e),Xe(e)}))}(),Zt=function(){var e={},t=["class","svgDemoBtn","width","18px","height","18px","viewBox","-1 -1 26 26"],n=["stroke","none","stroke-width","1","fill-rule","evenodd","fill","none"],i=["stroke-width","2","d","M11.9945425,0.455 C5.54802758,0.455 0.32,5.68231082 0.32,12.130976 C0.32,17.2894782 3.66510621,21.6652813 8.30467606,23.2091765 C8.88883324,23.3166901 9.10171015,22.9561612 9.10171015,22.646522 C9.10171015,22.3698537 9.09167555,21.6351775 9.08594149,20.6611044 C5.83831427,21.3663935 5.15309432,19.0957065 5.15309432,19.0957065 C4.62197717,17.7467693 3.8564804,17.3876739 3.8564804,17.3876739 C2.79639639,16.6637491 3.93675722,16.6780842 3.93675722,16.6780842 C5.10865537,16.7605113 5.72506662,17.8815197 5.72506662,17.8815197 C6.76651495,19.6655285 8.45806212,19.15018 9.12321287,18.8512923 C9.22929295,18.0972636 9.53104776,17.5826319 9.8643399,17.2909117 C7.27182883,16.9963244 4.5460009,15.9942978 4.5460009,11.5202988 C4.5460009,10.2459044 5.00114177,9.20302256 5.74800286,8.38735278 C5.62758763,8.09204878 5.22692032,6.90438198 5.86268402,5.29741216 C5.86268402,5.29741216 6.84249122,4.98347247 9.07303986,6.49439681 C10.0041076,6.23493068 11.0032672,6.10591437 11.995976,6.10089707 C12.9879681,6.10591437 13.986411,6.23493068 14.9189122,6.49439681 C17.1480273,4.98347247 18.126401,5.29741216 18.126401,5.29741216 C18.7635982,6.90438198 18.3629309,8.09204878 18.2432325,8.38735278 C18.9915271,9.20302256 19.4430841,10.2459044 19.4430841,11.5202988 C19.4430841,16.0057659 16.7129557,16.9927406 14.1125603,17.2815938 C14.5311465,17.6421227 14.9045771,18.3545795 14.9045771,19.4440505 C14.9045771,21.0044311 14.8902419,22.2637737 14.8902419,22.646522 C14.8902419,22.9590282 15.1009686,23.3224242 15.6930101,23.2084597 C20.3289961,21.6609808 23.6712353,17.2880446 23.6712353,12.130976 C23.6712353,5.68231082 18.4432077,0.455 11.9945425,0.455"];return Fe("githubBtn",".../doc/widgets.ts",e,(function(e){var o=Le(e,0,3);We(e,0,"http://www.w3.org/2000/svg"),qe(e,o,0,0,"svg",1,0,t),qe(e,o,1,1,"g",1,0,n),qe(e,o,2,2,"path",0,0,i),We(e),Xe(e)}))}(),Qt={ivyLogo:Ht,code:Jt,infoBlock:qt,notions:Wt,demo:function(){var n={},i=["class","demo"],o=["class","text"],r=["title","Reload demo"],a=["target","_blank","title","Open demo in a separate window"],s=["tabIndex",-1],d=["target","_blank","title","View code in github"],c=["tabIndex",-1],l=["#frame"],f=function(){function n(){this.ΔΔheight=120}return n.prototype.ΔDefault=function(e){switch(e){case"height":return 120}return Ct},e([wt(bt),t("design:type",String)],n.prototype,"src",void 0),e([wt(xt),t("design:type",Number)],n.prototype,"height",void 0),n=e([gt],n)}();return Fe("demo",".../doc/widgets.ts",n,(function(e,t,n,f){var u=n.src,p=n.height,v=Le(e,0,12);qe(e,v,0,0,"div",1,0,i),qe(e,v,1,1,"h1",1),qe(e,v,2,2,"span",1,0,o),Ge(e,v,0,3,3,0," live demo ",0),qe(e,v,4,2,"span",1,0,r),pt(e,v,5,4,"click",(function(){return f.query("#frame").contentDocument.location.reload()}),1),nt(e,v,0,6,3,Qe(e,0,Ut),1),qe(e,v,7,2,"a",1,0,a,s),st(e,0,7,"href",Qe(e,1,"./examples/"+u+"/")),nt(e,v,0,8,3,Qe(e,2,Gt),1),qe(e,v,9,2,"a",1,0,d,c),st(e,0,9,"href",Qe(e,3,"https://github.com/b-laporte/ivy/tree/master/src/doc/examples/"+u)),nt(e,v,0,10,3,Qe(e,4,Zt),1),qe(e,v,11,1,"iframe",0,l),st(e,0,11,"style",Qe(e,5,"height:"+p+"px")),st(e,0,11,"src",Qe(e,6,"./examples/"+u+"/")),Xe(e)}),f)}()};export{kt as A,ct as B,ut as C,We as D,et as E,dt as F,it as G,tt as H,Se as I,ot as J,Ee as K,Ze as L,Je as M,at as N,_e as O,pt as P,st as Q,e as _,Le as a,qe as b,nt as c,Qe as d,Ge as e,Xe as f,R as g,E as h,t as i,ae as j,F as k,n as l,i as m,Ct as n,$t as o,wt as p,bt as q,jt as r,Pt as s,le as t,$ as u,j as v,Qt as w,H as x,yt as y,gt as z,L as Δ,Fe as ζ};
